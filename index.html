<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>Hexo</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/06/turnover_https接口调用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liang2L">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/06/turnover_https接口调用/" itemprop="url">https接口调用去掉证书验证</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-06T14:50:51+08:00">
                2019-12-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/日常踩坑/" itemprop="url" rel="index">
                    <span itemprop="name">日常踩坑</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2019/12/06/turnover_https接口调用/" class="leancloud_visitors" data-flag-title="https接口调用去掉证书验证">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="https接口调用示例"><a href="#https接口调用示例" class="headerlink" title="https接口调用示例"></a>https接口调用示例</h3><h4 id="1、POST格式调用"><a href="#1、POST格式调用" class="headerlink" title="1、POST格式调用"></a>1、POST格式调用</h4><p>通过POST方式调用https接口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">TrustManager[] tm = &#123;new HttpsManager()&#125;;</span><br><span class="line">SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);</span><br><span class="line">sslContext.init(null, tm, new SecureRandom());</span><br><span class="line">SSLSocketFactory ssf = sslContext.getSocketFactory();</span><br><span class="line">HttpsURLConnection httpsURLConnection = (HttpsURLConnection) url.openConnection();</span><br><span class="line">httpsURLConnection.setRequestMethod(&quot;POST&quot;);</span><br><span class="line">httpsURLConnection.setUseCaches(false);</span><br><span class="line">httpsURLConnection.setInstanceFollowRedirects(true);</span><br><span class="line">httpsURLConnection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);</span><br><span class="line">httpsURLConnection.setHostnameVerifier(new HttpsManager().new TrustAnyHostnameVerifier());</span><br><span class="line">httpsURLConnection.setSSLSocketFactory(ssf);</span><br><span class="line">httpsURLConnection.setDoOutput(true);</span><br><span class="line">httpsURLConnection.connect();</span><br><span class="line">DataOutputStream out = new DataOutputStream(httpsURLConnection.getOutputStream());</span><br><span class="line">out.write(data.getBytes(&quot;UTF-8&quot;));</span><br><span class="line">out.flush();</span><br><span class="line">out.close();</span><br><span class="line">BufferedReader responseReader = new BufferedReader(new InputStreamReader(httpsURLConnection.getInputStream(), &quot;UTF-8&quot;));</span><br><span class="line">String lines;</span><br><span class="line">while ((lines = responseReader.readLine()) != null) &#123;</span><br><span class="line">    result.append(lines);</span><br><span class="line">&#125;</span><br><span class="line">responseReader.close();</span><br><span class="line">// 断开连接</span><br><span class="line">httpsURLConnection.disconnect();</span><br></pre></td></tr></table></figure>

<h4 id="2、GET格式调用"><a href="#2、GET格式调用" class="headerlink" title="2、GET格式调用"></a>2、GET格式调用</h4><p>通过GET方式调用https接口<br>相比较于POST方式调用https接口，GET方式要注意一下几点</p>
<ul>
<li>httpsURLConnection.setRequestMethod(“GET”)</li>
<li>去掉httpsURLConnection.setDoOutput(true)</li>
<li>去掉new DataOutputStream(httpsURLConnection.getOutputStream())。否则即使将RequestMethod设置为GET后，通过new DataOutputStream()也==会将RequestMethod重置为POST==<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">TrustManager[] tm = &#123;new HttpsManager()&#125;;</span><br><span class="line">SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);</span><br><span class="line">sslContext.init(null, tm, new SecureRandom());</span><br><span class="line">SSLSocketFactory ssf = sslContext.getSocketFactory();</span><br><span class="line">HttpsURLConnection httpsURLConnection = (HttpsURLConnection) url.openConnection();</span><br><span class="line">//将POST改为GET</span><br><span class="line">httpsURLConnection.setRequestMethod(&quot;GET&quot;);</span><br><span class="line">httpsURLConnection.setUseCaches(false);</span><br><span class="line">httpsURLConnection.setInstanceFollowRedirects(true);</span><br><span class="line">httpsURLConnection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);</span><br><span class="line">httpsURLConnection.setHostnameVerifier(new HttpsManager().new TrustAnyHostnameVerifier());</span><br><span class="line">httpsURLConnection.setSSLSocketFactory(ssf);</span><br><span class="line">//httpsURLConnection.setDoOutput(true);</span><br><span class="line">httpsURLConnection.connect();</span><br><span class="line">/** </span><br><span class="line">DataOutputStream out = new DataOutputStream(httpsURLConnection.getOutputStream());</span><br><span class="line">out.write(data.getBytes(&quot;UTF-8&quot;));</span><br><span class="line">out.flush();</span><br><span class="line">out.close();</span><br><span class="line">**/</span><br><span class="line">BufferedReader responseReader = new BufferedReader(new InputStreamReader(httpsURLConnection.getInputStream(), &quot;UTF-8&quot;));</span><br><span class="line">String lines;</span><br><span class="line">while ((lines = responseReader.readLine()) != null) &#123;</span><br><span class="line">    result.append(lines);</span><br><span class="line">&#125;</span><br><span class="line">responseReader.close();</span><br><span class="line">// 断开连接</span><br><span class="line">httpsURLConnection.disconnect();</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="不校验https证书的调用方式"><a href="#不校验https证书的调用方式" class="headerlink" title="不校验https证书的调用方式"></a>不校验https证书的调用方式</h4><p>某些情况下服务端只能通过https进行访问，但服务端并没有正式合法证书，这时可以通过绕过证书校验的方式访问到服务端，修改点如下(==以GET方式为例==)：</p>
<ol>
<li>重写TrustManager</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">TrustManager[] trustAllCerts = new TrustManager[] &#123;new X509TrustManager() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public java.security.cert.X509Certificate[] getAcceptedIssuers() &#123;</span><br><span class="line">            return new java.security.cert.X509Certificate[]&#123;&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        @Override</span><br><span class="line">        public void checkClientTrusted(X509Certificate[] certs, String authType) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">        @Override</span><br><span class="line">        public void checkServerTrusted(X509Certificate[] certs, String authType) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>初始化sslContext</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sslContext.init(null, trustAllCerts, new java.security.SecureRandom());</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>重写HostnameVerifier</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">HostnameVerifier allHostsValid = new HostnameVerifier()&#123;</span><br><span class="line">    @Override</span><br><span class="line">    public boolean verify(String hostname, SSLSession session) &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>HostnameVerifier属性赋值</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">httpsURLConnection.setHostnameVerifier(allHostsValid);</span><br></pre></td></tr></table></figure>

<h3 id="获取http接口响应的小窍门"><a href="#获取http接口响应的小窍门" class="headerlink" title="获取http接口响应的小窍门"></a>获取http接口响应的小窍门</h3><p>在服务端返回非成功（200）的状态码时，也可以通过==httpsURLConnection.getErrorStream==()获取返回的错误信息用于问题定位</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">BufferedReader responseReader = null;</span><br><span class="line">if (code == 200) &#123;</span><br><span class="line">    responseReader = new BufferedReader(new InputStreamReader(httpsURLConnection.getInputStream(), &quot;UTF-8&quot;));</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    responseReader = new BufferedReader(new InputStreamReader(httpsURLConnection.getErrorStream(), &quot;UTF-8&quot;));</span><br><span class="line">&#125;</span><br><span class="line">String lines;</span><br><span class="line">while ((lines = responseReader.readLine()) != null) &#123;</span><br><span class="line">    result.append(lines);</span><br><span class="line">&#125;</span><br><span class="line">responseReader.close();</span><br><span class="line">// 断开连接</span><br><span class="line">httpsURLConnection.disconnect();</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/06/study_mybatis_实体类字段自动加解密/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liang2L">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/06/study_mybatis_实体类字段自动加解密/" itemprop="url">【高级功能】实体类字段自动加解密</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-06T14:44:11+08:00">
                2019-12-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习笔记/" itemprop="url" rel="index">
                    <span itemprop="name">学习笔记</span>
                  </a>
                </span>

                
                
                  >
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习笔记/Mybatis（Plus）/" itemprop="url" rel="index">
                    <span itemprop="name">Mybatis（Plus）</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2019/12/06/study_mybatis_实体类字段自动加解密/" class="leancloud_visitors" data-flag-title="【高级功能】实体类字段自动加解密">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <pre><code>针对项目安全性要求，对某些敏感字段数据需要进行加密存储，通过mybatis plus和自定义注解方式来完成对敏感字段的自动加解密</code></pre><h3 id="自定义注解"><a href="#自定义注解" class="headerlink" title="自定义注解"></a>自定义注解</h3><p>在需要加解密的实体类型注解@==EncryptionClass==，在需要加解密的字段上注解@==EncryptionField==</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 对实体类打标</span><br><span class="line"> */</span><br><span class="line">@Documented</span><br><span class="line">@Inherited</span><br><span class="line">@Target(&#123;ElementType.TYPE&#125;)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">public @interface EncryptionClass &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 对实体类的字段打标</span><br><span class="line"> */</span><br><span class="line">@Documented</span><br><span class="line">@Inherited</span><br><span class="line">@Target(&#123;ElementType.FIELD&#125;)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">public @interface EncryptionField &#123;</span><br><span class="line">    SecretMode mode() default SecretMode.AES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="自定义mybatis拦截器"><a href="#自定义mybatis拦截器" class="headerlink" title="自定义mybatis拦截器"></a>自定义mybatis拦截器</h3><h4 id="入库或更新时拦截器"><a href="#入库或更新时拦截器" class="headerlink" title="入库或更新时拦截器"></a>入库或更新时拦截器</h4><p><a href="https://note.youdao.com/ynoteshare1/index.html?id=3594dfeedcc613081ac4c6cb630bd8f2&type=note" target="_blank" rel="noopener">ParamInterceptor.java</a><br><img src="https://note.youdao.com/yws/api/personal/file/845F3C9C486F4CDE890DCFDA50E39E57?method=download&shareKey=0c86a90f4470e60c3bc5dab53296be70" alt="image"></p>
<p>==注意：==</p>
<p>1、@Intercepts注解。method为update代表插入和更新时执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Intercepts(&#123;</span><br><span class="line">        @Signature(type = Executor.class, method = &quot;update&quot;, args = &#123;MappedStatement.class, Object.class&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>2、@ConditionalOnProperty注解。根据yml文件中==entity.encrypt==与==havingValue==值进行比较，一致则拦截器起效，不一致则拦截器不起效</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@ConditionalOnProperty(prefix = &quot;entity&quot;, value = &quot;encrypt&quot;, havingValue = &quot;true&quot;)</span><br></pre></td></tr></table></figure>

<h4 id="查询时拦截器"><a href="#查询时拦截器" class="headerlink" title="查询时拦截器"></a>查询时拦截器</h4><p><a href="https://note.youdao.com/ynoteshare1/index.html?id=028ac60cd7d431a6b02fd1b62c6f360d&type=note" target="_blank" rel="noopener">ResultInterceptor.java</a></p>
<p>==注意点同入库拦截器==</p>
<h3 id="加解密工具类"><a href="#加解密工具类" class="headerlink" title="加解密工具类"></a>加解密工具类</h3><p><a href="https://note.youdao.com/ynoteshare1/index.html?id=8bc1aa14a2bf334f272b2e472b78f261&type=note" target="_blank" rel="noopener">SensitiveUtils.java</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/06/study_mybatis_公共字段自动填充/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liang2L">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/06/study_mybatis_公共字段自动填充/" itemprop="url">【高级功能】公共字段自动填充</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-06T14:43:11+08:00">
                2019-12-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习笔记/" itemprop="url" rel="index">
                    <span itemprop="name">学习笔记</span>
                  </a>
                </span>

                
                
                  >
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习笔记/Mybatis（Plus）/" itemprop="url" rel="index">
                    <span itemprop="name">Mybatis（Plus）</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2019/12/06/study_mybatis_公共字段自动填充/" class="leancloud_visitors" data-flag-title="【高级功能】公共字段自动填充">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <pre><code>对于一些基础字段，比如创建时间、修改时间、创建人、修改人等基础字段，可以使用mybatis plus的公共字段自动填充功能进行自动入库、更新，减少手写代码及代码耦合。</code></pre><h3 id="提取公共字段"><a href="#提取公共字段" class="headerlink" title="提取公共字段"></a>提取公共字段</h3><p>将需要自动填充的功能字段提取出来，形成父类，所有有这些字段的实体继承父类即可</p>
<h3 id="TableField注解"><a href="#TableField注解" class="headerlink" title="@TableField注解"></a>@TableField注解</h3><p>fill 值为INSERT时代表insert方法生效，INSERT_UPDATE代表insert和update方法都生效</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> @TableField(fill = FieldFill.INSERT)</span><br><span class="line"> </span><br><span class="line">@TableField(fill = FieldFill.INSERT_UPDATE)</span><br></pre></td></tr></table></figure>

<h3 id="自定义公共字段填充处理器"><a href="#自定义公共字段填充处理器" class="headerlink" title="自定义公共字段填充处理器"></a>自定义公共字段填充处理器</h3><p>实现MetaObjectHandler接口，重新update和insert方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">@Log4j2</span><br><span class="line">@Component</span><br><span class="line">public class MetaHandler implements MetaObjectHandler &#123;</span><br><span class="line">    /**</span><br><span class="line">     * 更新数据执行</span><br><span class="line">     * @param metaObject</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    public void updateFill(MetaObject metaObject) &#123;</span><br><span class="line">        String userId = BaseContextHandler.getUserID();</span><br><span class="line">        this.setFieldValByName(&quot;updatedTime&quot;, LocalDateTime.now(), metaObject);</span><br><span class="line">        this.setFieldValByName(&quot;updatedBy&quot;, userId!=null?userId:&quot;auto&quot;, metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 新增数据执行</span><br><span class="line">     * @param metaObject</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    public void insertFill(MetaObject metaObject) &#123;</span><br><span class="line">        String userId = BaseContextHandler.getUserID();</span><br><span class="line">        this.setFieldValByName(&quot;createdTime&quot;, LocalDateTime.now(), metaObject);</span><br><span class="line">        this.setFieldValByName(&quot;createdBy&quot;, userId!=null?userId:&quot;auto&quot;, metaObject);</span><br><span class="line">        this.setFieldValByName(&quot;updatedTime&quot;, LocalDateTime.now(), metaObject);</span><br><span class="line">        this.setFieldValByName(&quot;updatedBy&quot;, userId!=null?userId:&quot;auto&quot;, metaObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/06/study_mybatis_增删改查/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liang2L">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/06/study_mybatis_增删改查/" itemprop="url">【基础使用】增删改查</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-06T14:39:11+08:00">
                2019-12-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习笔记/" itemprop="url" rel="index">
                    <span itemprop="name">学习笔记</span>
                  </a>
                </span>

                
                
                  >
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习笔记/Mybatis（Plus）/" itemprop="url" rel="index">
                    <span itemprop="name">Mybatis（Plus）</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2019/12/06/study_mybatis_增删改查/" class="leancloud_visitors" data-flag-title="【基础使用】增删改查">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="根据generate自动生成的数据库映射entity代码"><a href="#根据generate自动生成的数据库映射entity代码" class="headerlink" title="根据generate自动生成的数据库映射entity代码"></a>根据generate自动生成的数据库映射entity代码</h3><p><img src="https://note.youdao.com/yws/api/personal/file/61D933D04CA44BA389346C43EE2C1D20?method=download&shareKey=9413b745dbd3bf3f0a959561b01752d7" alt="image"></p>
<h3 id="根据generate自动生成的mapper文件，继承BaseMapper"><a href="#根据generate自动生成的mapper文件，继承BaseMapper" class="headerlink" title="根据generate自动生成的mapper文件，继承BaseMapper"></a>根据generate自动生成的mapper文件，继承BaseMapper</h3><p><img src="https://note.youdao.com/yws/api/personal/file/04486B45D8804467BF9F8FB085DD2D86?method=download&shareKey=085e895d7c9556cc2455e4d9e6ab3c81" alt="image"></p>
<h3 id="使用BaseMapper中自带API即可满足单表简单查询的大部分需求"><a href="#使用BaseMapper中自带API即可满足单表简单查询的大部分需求" class="headerlink" title="使用BaseMapper中自带API即可满足单表简单查询的大部分需求"></a>使用BaseMapper中自带API即可满足单表简单查询的大部分需求</h3><p><img src="https://note.youdao.com/yws/api/personal/file/730CCB4D1723443F982347C3F9F7312D?method=download&shareKey=f1242ab940c0dc295baf7d5d512328da" alt="image"></p>
<h3 id="service层继承ServiceImpl有部分进阶API可供使用，比如批量入库，批量更新等"><a href="#service层继承ServiceImpl有部分进阶API可供使用，比如批量入库，批量更新等" class="headerlink" title="service层继承ServiceImpl有部分进阶API可供使用，比如批量入库，批量更新等"></a>service层继承ServiceImpl有部分进阶API可供使用，比如批量入库，批量更新等</h3><p><img src="https://note.youdao.com/yws/api/personal/file/55FA8264042141838B2EF6DD1A2C928C?method=download&shareKey=de9bce819aef55fb0f1082c2c0cc5660" alt="image"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/06/study_mybatis_条件查询/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liang2L">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/06/study_mybatis_条件查询/" itemprop="url">【基础使用】条件查询</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-06T14:38:11+08:00">
                2019-12-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习笔记/" itemprop="url" rel="index">
                    <span itemprop="name">学习笔记</span>
                  </a>
                </span>

                
                
                  >
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习笔记/Mybatis（Plus）/" itemprop="url" rel="index">
                    <span itemprop="name">Mybatis（Plus）</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2019/12/06/study_mybatis_条件查询/" class="leancloud_visitors" data-flag-title="【基础使用】条件查询">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <pre><code>条件查询通过LambdaQueryWrapper条件查询包装器完成</code></pre><h3 id="LambdaQueryWrapper使用方式"><a href="#LambdaQueryWrapper使用方式" class="headerlink" title="LambdaQueryWrapper使用方式"></a>LambdaQueryWrapper使用方式</h3><p><img src="https://note.youdao.com/yws/api/personal/file/B3B3790952AF42B2A9D23750565C441E?method=download&shareKey=382f24f2d300009591b7666832d6e5f4" alt="image"></p>
<h3 id="LambdaQueryWrapper条件参数说明"><a href="#LambdaQueryWrapper条件参数说明" class="headerlink" title="LambdaQueryWrapper条件参数说明"></a>LambdaQueryWrapper条件参数说明</h3><p><img src="https://note.youdao.com/yws/api/personal/file/98D8F078CA2A4DE6A9F5A0F2631A33E4?method=download&shareKey=2c8c997abb9899ae31de308244eefc39" alt="image"></p>
<h3 id="通过BaseMapper中API通过条件构造器参数获取结果"><a href="#通过BaseMapper中API通过条件构造器参数获取结果" class="headerlink" title="通过BaseMapper中API通过条件构造器参数获取结果"></a>通过BaseMapper中API通过条件构造器参数获取结果</h3><p><img src="https://note.youdao.com/yws/api/personal/file/97C6406DD2E549E1863E8DC807469CB8?method=download&shareKey=732b43976f565fdf715edd1408e86dbf" alt="image"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/06/study_mybatis_分页查询/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liang2L">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/06/study_mybatis_分页查询/" itemprop="url">【基础使用】分页查询</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-06T14:37:11+08:00">
                2019-12-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习笔记/" itemprop="url" rel="index">
                    <span itemprop="name">学习笔记</span>
                  </a>
                </span>

                
                
                  >
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习笔记/Mybatis（Plus）/" itemprop="url" rel="index">
                    <span itemprop="name">Mybatis（Plus）</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2019/12/06/study_mybatis_分页查询/" class="leancloud_visitors" data-flag-title="【基础使用】分页查询">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="创建项目分页类"><a href="#创建项目分页类" class="headerlink" title="创建项目分页类"></a>创建项目分页类</h3><p><a href="https://note.youdao.com/ynoteshare1/index.html?id=9782e48a6f541cba5fe3d07515052061&type=note" target="_blank" rel="noopener">QueryPageVo.java</a></p>
<p>==前端查询条件要封装成一个名为vo的实体对象==</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">public class QueryPageVo&lt;T,E&gt; extends AbstractVo&lt;E&gt; implements IPage&lt;T&gt; &#123;</span><br><span class="line">    /**</span><br><span class="line">     *  每页第一行 index,从0开始</span><br><span class="line">     */</span><br><span class="line">    @Getter</span><br><span class="line">    @Setter</span><br><span class="line">    private long index;</span><br><span class="line">    /**</span><br><span class="line">     * 每页记录数</span><br><span class="line">     */</span><br><span class="line">    @Getter</span><br><span class="line">    @Setter</span><br><span class="line">    private long pageSize;</span><br><span class="line">    /**</span><br><span class="line">     * 当前页结果集</span><br><span class="line">     */</span><br><span class="line">    private List&lt;T&gt; rows = new ArrayList&lt;&gt;();</span><br><span class="line">    /**</span><br><span class="line">     * 总记录数</span><br><span class="line">     */</span><br><span class="line">    @Getter</span><br><span class="line">    @Setter</span><br><span class="line">    private long total;</span><br><span class="line">    /**</span><br><span class="line">     * 总页数</span><br><span class="line">     */</span><br><span class="line">    @Getter</span><br><span class="line">    @Setter</span><br><span class="line">    private int totalPageCount;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="后台查询条件、分页条件参数接收"><a href="#后台查询条件、分页条件参数接收" class="headerlink" title="后台查询条件、分页条件参数接收"></a>后台查询条件、分页条件参数接收</h3><p><img src="https://note.youdao.com/yws/api/personal/file/916BF0D8A6A5489DA75AEC168C5913F4?method=download&shareKey=c27046fc471c9945c37536d33d8df521" alt="image"></p>
<h3 id="单表分页查询"><a href="#单表分页查询" class="headerlink" title="单表分页查询"></a>单表分页查询</h3><p>使用BaseMapper自带selectPage传入指定参数即可<br><img src="https://note.youdao.com/yws/api/personal/file/8B37C6E1EFEC4DC1AE5E985CEA4F8849?method=download&shareKey=22b8818b6cd55fc4b4cbb5a9fd384865" alt="image"></p>
<h3 id="多表关联分页查询"><a href="#多表关联分页查询" class="headerlink" title="多表关联分页查询"></a>多表关联分页查询</h3><p>需要手写查询sql，封装分页查询结果</p>
<h4 id="service层调用mapper手写分页方法"><a href="#service层调用mapper手写分页方法" class="headerlink" title="service层调用mapper手写分页方法"></a>service层调用mapper手写分页方法</h4><p><img src="https://note.youdao.com/yws/api/personal/file/FF72F0E754CD4C88BE2874A0241E5A69?method=download&shareKey=5425ef12d3ac44f85f1a800f9b39b097" alt="image"></p>
<h4 id="对应的mapper-xml文件"><a href="#对应的mapper-xml文件" class="headerlink" title="对应的mapper.xml文件"></a>对应的mapper.xml文件</h4><p>==注意点：==</p>
<ul>
<li>需要指定参数类型和返回值类型</li>
<li>查询条件直接从封装好的名为vo的实体类中调用即可</li>
</ul>
<p><img src="https://note.youdao.com/yws/api/personal/file/28C4983768CC4805A3F67C9347C5AA3C?method=download&shareKey=6f364188c841b85ccd098cab68f3996a" alt="image"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/06/study_mybatis_项目配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liang2L">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/06/study_mybatis_项目配置/" itemprop="url">【基础使用】项目配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-06T14:33:11+08:00">
                2019-12-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习笔记/" itemprop="url" rel="index">
                    <span itemprop="name">学习笔记</span>
                  </a>
                </span>

                
                
                  >
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习笔记/Mybatis（Plus）/" itemprop="url" rel="index">
                    <span itemprop="name">Mybatis（Plus）</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2019/12/06/study_mybatis_项目配置/" class="leancloud_visitors" data-flag-title="【基础使用】项目配置">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="基于Springboot的MybatisPlus配置"><a href="#基于Springboot的MybatisPlus配置" class="headerlink" title="基于Springboot的MybatisPlus配置"></a>基于Springboot的MybatisPlus配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mybatis-plus:</span><br><span class="line">  # 扫描 mapper.xml</span><br><span class="line">  mapper-locations: classpath*:/mapper/*Mapper.xml</span><br><span class="line">  #typeAliasesPackage: com.act.service.entity</span><br><span class="line">  global-config:</span><br><span class="line">    #banner: false</span><br><span class="line">    db-config:</span><br><span class="line">      id-type: INPUT #默认值0</span><br><span class="line">      logic-delete-value: 1 #默认值1</span><br><span class="line">      logic-not-delete-value: 0</span><br><span class="line">  configuration:</span><br><span class="line">    map-underscore-to-camel-case: true</span><br><span class="line">    cache-enabled: false</span><br><span class="line">#pagehelper分页插件配置</span><br><span class="line">pagehelper:</span><br><span class="line">  helperDialect: mysql #设置sql语言</span><br><span class="line">  reasonable: true</span><br><span class="line">  supportMethodsArguments: true</span><br><span class="line">  params: count=countSql</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/06/install_nacos/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liang2L">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/06/install_nacos/" itemprop="url">Nacos安装</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-06T14:24:11+08:00">
                2019-12-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/组件安装/" itemprop="url" rel="index">
                    <span itemprop="name">组件安装</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2019/12/06/install_nacos/" class="leancloud_visitors" data-flag-title="Nacos安装">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Nacos致力于帮助您发现、配置和管理微服务，将使用Nacos作为微服务架构中的注册中心（替代：eurekba、consul等传统方案）以及配置中心（spring cloud config）来使用。</p>
<h2 id="Nacos下载"><a href="#Nacos下载" class="headerlink" title="Nacos下载"></a>Nacos下载</h2><p><a href="https://pan.baidu.com/s/185VXiqRw0yK73IvI1ICeXA" target="_blank" rel="noopener">https://pan.baidu.com/s/185VXiqRw0yK73IvI1ICeXA</a></p>
<p>提取码：i5mn</p>
<h2 id="单机版安装"><a href="#单机版安装" class="headerlink" title="单机版安装"></a>单机版安装</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>将压缩包上传至服务器并解压</p>
<h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><p>进行安装目录/bin，执行命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh startup.sh -m standalone</span><br></pre></td></tr></table></figure>

<p>启动完成之后，访问：<a href="http://IP:8848/nacos/" target="_blank" rel="noopener">http://IP:8848/nacos/</a> ，默认用户名密码为：nacos</p>
<h2 id="集群版安装"><a href="#集群版安装" class="headerlink" title="集群版安装"></a>集群版安装</h2><p><img src="https://note.youdao.com/yws/api/personal/file/CF5DC72EC81E43658CA05952E7F28502?method=download&shareKey=d5fb06b0cdee9734a60dee262bb92dc8" alt="image"></p>
<h3 id="MySQL数据源配置"><a href="#MySQL数据源配置" class="headerlink" title="MySQL数据源配置"></a>MySQL数据源配置</h3><ol>
<li>第一步：初始化MySQL数据库，数据库初始化文件：nacos-mysql.sql，该文件可以在Nacos程序包下的conf目录下获得。</li>
<li>第二步：修改conf/application.properties文件，增加支持MySQL数据源配置，添加（目前只支持mysql）数据源的url、用户名和密码。配置样例如下：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spring.datasource.platform=mysql</span><br><span class="line"></span><br><span class="line">db.num=1</span><br><span class="line">db.url.0=jdbc:mysql://localhost:3306/nacos?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true</span><br><span class="line">db.user=root</span><br><span class="line">db.password=</span><br></pre></td></tr></table></figure>

<h3 id="集群配置"><a href="#集群配置" class="headerlink" title="集群配置"></a>集群配置</h3><p>在Nacos的conf目录下有一个cluster.conf.example，可以直接把example扩展名去掉来使用，也可以单独创建一个cluster.conf文件，然后打开将后续要部署的Nacos实例地址配置在这里。</p>
<p>本文以在本地不同端点启动3个Nacos服务端为例，可以如下配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:8841</span><br><span class="line">127.0.0.1:8842</span><br><span class="line">127.0.0.1:8843</span><br></pre></td></tr></table></figure>

<h3 id="启动实例"><a href="#启动实例" class="headerlink" title="启动实例"></a>启动实例</h3><p>生产环境下直接执行命令即可 sh startup.sh</p>
<p>本地安装集群，则需要指定端口启动各个实例，修改startup.sh脚本中的Dserver.port即可</p>
<h3 id="Proxy配置"><a href="#Proxy配置" class="headerlink" title="Proxy配置"></a>Proxy配置</h3><p>在Nacos的集群启动完毕之后，根据架构图所示，我们还需要提供一个统一的入口给我们用来维护以及给Spring Cloud应用访问。简单地说，就是我们需要为上面启动的的三个Nacos实例做一个可以为它们实现负载均衡的访问点。这个实现的方式非常多，这里就举个用Nginx来实现的简单例子吧。</p>
<ul>
<li>Nginx安装</li>
</ul>
<p>传送门：<a href="http://note.youdao.com/noteshare?id=fd83221332c62e79f1bc5deb579aab64&amp;sub=3DE8BD1782EF4741A34A9E87E2C9762F" target="_blank" rel="noopener">http://note.youdao.com/noteshare?id=fd83221332c62e79f1bc5deb579aab64&amp;sub=3DE8BD1782EF4741A34A9E87E2C9762F</a></p>
<ul>
<li>Nginx配置</li>
</ul>
<p><img src="https://note.youdao.com/yws/api/personal/file/EC5EF30098344E7688B68C6F0EEC7BBA?method=download&shareKey=a1bf763dd7bf593602d0f88efbb88959" alt="image"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/06/install_nginx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liang2L">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/06/install_nginx/" itemprop="url">Nginx安装</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-06T14:17:11+08:00">
                2019-12-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/组件安装/" itemprop="url" rel="index">
                    <span itemprop="name">组件安装</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2019/12/06/install_nginx/" class="leancloud_visitors" data-flag-title="Nginx安装">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="安装依赖包"><a href="#安装依赖包" class="headerlink" title="安装依赖包"></a>安装依赖包</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//一键安装上面四个依赖</span><br><span class="line">yum -y install gcc zlib zlib-devel pcre-devel openssl openssl-devel</span><br></pre></td></tr></table></figure>

<h2 id="下载Nginx安装包"><a href="#下载Nginx安装包" class="headerlink" title="下载Nginx安装包"></a>下载Nginx安装包</h2><p>任意目录下载安装包（/usr/local/目录下除外）。如果在/usr/local/目录下，make install时会报错（复制配置文件已存在）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget  http://nginx.org/download/nginx-1.13.11.tar.gz</span><br></pre></td></tr></table></figure>

<h2 id="创建Nginx安装目录"><a href="#创建Nginx安装目录" class="headerlink" title="创建Nginx安装目录"></a>创建Nginx安装目录</h2><p>我习惯于创建在/usr/local/目录下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /usr/local/nginx</span><br></pre></td></tr></table></figure>

<h2 id="编译Nginx"><a href="#编译Nginx" class="headerlink" title="编译Nginx"></a>编译Nginx</h2><p>在安装包目录下解压安装包，执行./configure命令，prefix指定创建的安装目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/local/nginx</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<h2 id="Nginx配置文件"><a href="#Nginx配置文件" class="headerlink" title="Nginx配置文件"></a>Nginx配置文件</h2><p>配置文件中可更改Nginx监听端口(默认80，一般和Apache服务端口冲突)</p>
<h2 id="Nginx命令"><a href="#Nginx命令" class="headerlink" title="Nginx命令"></a>Nginx命令</h2><p>在安装目录（/usr/local/nginx/sbin）下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./nginx             启动</span><br><span class="line">./nginx -s stop     停止</span><br><span class="line">./nginx -s reload   重启</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/13/hexo_Hexo博客迁移/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liang2L">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/13/hexo_Hexo博客迁移/" itemprop="url">Hexo博客迁移</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-13T19:47:11+08:00">
                2019-08-13
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hexo/" itemprop="url" rel="index">
                    <span itemprop="name">Hexo</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2019/08/13/hexo_Hexo博客迁移/" class="leancloud_visitors" data-flag-title="Hexo博客迁移">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <pre><code>背景：
将Hexo环境源码上传至github后，在新电脑（什么环境都未安装）上如何将Hexo环境复刻下来，重新开始写博客上传</code></pre><h2 id="一、组件安装"><a href="#一、组件安装" class="headerlink" title="一、组件安装"></a>一、组件安装</h2><p>1、git</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y git</span><br></pre></td></tr></table></figure>

<p>2、nodejs</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y nodejs</span><br></pre></td></tr></table></figure>

<p>3、npm</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y npm</span><br></pre></td></tr></table></figure>

<p>4、hexo-cli</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y hexo-cli</span><br></pre></td></tr></table></figure>

<h2 id="二、环境复刻"><a href="#二、环境复刻" class="headerlink" title="二、环境复刻"></a>二、环境复刻</h2><p>1、将github上hexo源码分支clone至本地（我的分支名为hexo）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b hexo https://github.com/Liang2L/liang2l.github.io.git</span><br></pre></td></tr></table></figure>

<p>2、依赖安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure>

<p>== 备注 ==：在npm安装依赖时，可能会报错</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm: relocation error: npm: symbol SSL_set_cert_cb, version libssl.so.10 not defined in file libssl.so.10 with link time reference</span><br></pre></td></tr></table></figure>

<p>此时将openssl更新即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update -y openssl</span><br></pre></td></tr></table></figure>

<p>3、安装git推送环境</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;Liang2L&quot;</span><br><span class="line">git config --global user.email &quot;469449505@qq.com&quot;</span><br><span class="line"></span><br><span class="line">//检查输入是否正确</span><br><span class="line">git config user.name</span><br><span class="line">git config user.email</span><br><span class="line"></span><br><span class="line">//创建SSH</span><br><span class="line">ssh-keygen -t rsa -C &quot;469449505@qq.com&quot;</span><br><span class="line"></span><br><span class="line">//获取公钥</span><br><span class="line">cat /root/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure>

<p>4、在github上settings中创建SSH，将获取的公钥复制进去即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//查看SSH是否创建成功</span><br><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure>

<h2 id="三、新环境上更新博客"><a href="#三、新环境上更新博客" class="headerlink" title="三、新环境上更新博客"></a>三、新环境上更新博客</h2><p>1、将环境源码推送至hexo分支上</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m &quot;hexo迁移测试&quot;</span><br><span class="line">git push origin hexo</span><br></pre></td></tr></table></figure>

<p>2、将生成的html静态文件推送至master分支上</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<p>参考文档：<br>安装：<a href="https://blog.csdn.net/sinat_37781304/article/details/82729029" target="_blank" rel="noopener">https://blog.csdn.net/sinat_37781304/article/details/82729029</a><br>迁移：<a href="https://blog.csdn.net/White_Idiot/article/details/80685990" target="_blank" rel="noopener">https://blog.csdn.net/White_Idiot/article/details/80685990</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Liang2L</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">21</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liang2L</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("Se5yrzT5g2FiJQG04dwso1rG-gzGzoHsz", "ic8hUbiMSAvHuu8mUuo5A2h7");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>
